;/*FB_PKG_DELIM*/

__d("WAWebTPPreloadingUtils",["WALogger","WAWebMimeTypes","WAWebMsgCollection","WAWebMsgType","WAWebTPIframeUtils","WAWebTPPdfViewerGatingUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1;function u(){s=!1}var c=50,d=100;function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r,a;if(n===void 0&&(n={inChatLimit:c,appStartLimit:d}),!o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabled())return!1;var i=!1;if(s)return!0;var l=yield _(t,(r=n.inChatLimit)!=null?r:c,(a=n.appStartLimit)!=null?a:d);return i=l.some(function(e){return e.type===o("WAWebMsgType").MSG_TYPE.DOCUMENT&&e.mimetype!=null&&o("WAWebMimeTypes").isPdfDocument(e.mimetype)}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Preloading WebTP iframe for PDFs: ",""])),i),i?(o("WAWebTPIframeUtils").preloadWebTPIframeIfEnabled("application/pdf",t?"chatOpen":"appStart"),s=!0,!0):!1}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(e){var r=e.msgs.last();return o("WAWebMsgCollection").MsgCollection.getAllDocsMsgs(t,r==null?void 0:r.id,"before")}return o("WAWebMsgCollection").MsgCollection.getAllDocsMsgs(n)}),f.apply(this,arguments)}l.__resetPreloadingStateForTests=u,l.maybePreloadWebTPIframeForPDFs=m}),98);
__d("WAWebToastManagerImpl",["WAWebL10N","WAWebNoop","WAWebSetRefCache","WAWebToastManager","WAWebVelocityTransitionGroup","WDSToast.react","cr:782","lodash","react","stylex","uniqueID","useLazyRef","useWAWebABPropConfigValue","useWAWebListener","useWAWebPrevious"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.cloneElement,p=c.useEffect,_=c.useRef,f=c.useState,g={slide0:{transform:"xnn1q72",$$css:!0},slide1:{transform:"xvav9fi",$$css:!0},slide2:{transform:"x8r675y",$$css:!0},slide3:{opacity:"xg01cxk",transform:"x1o6clbr",$$css:!0},wrapper:{opacity:"x1hc1fzr",bottom:"x1ey2m1c",lineHeight:"xzl6hoh",marginTop:"x98l61r",marginInlineEnd:"xviac27",marginBottom:"x1ua1l7f",marginInlineStart:"xlese2p",minHeight:"xjwf9q1",position:"x10l6tqk",zIndex:"xc9l9hb",transition:"x1alf9jy",$$css:!0},center:{insetInlineStart:"xbudbmw",left:null,right:null,marginInlineStart:"x1lziwak",marginInlineEnd:"x14z9mp",maxWidth:"x65f84u",$$css:!0},transformLeft:{transform:"xuuh30",$$css:!0},transformRight:{transform:"xitnhlw",$$css:!0},right:{insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0}},h=3;function y(){var e=r("useLazyRef")(function(){return new Map}),t=function(n,r){r?e.current.set(n,r):e.current.delete(n)},a=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_toast"),i=o("WDSToast.react").useWDSToast(),l=i.showToast,u=r("useLazyRef")(function(){return new(r("WAWebSetRefCache"))(t)}),c=_(!1),y=f({}),b=y[0],v=y[1],S=r("useWAWebPrevious")(b);function R(e,t){var n=e.action,r=e.duration,i=e.id,s=e.msg,u=e.visibile;if(a===!1||u===!1||r!=null&&r!==4e3||t!=null&&t!==o("WAWebToastManager").ToastPosition.LEFT)return!1;var c=Array.isArray(n)?n[0]:n;return(c==null?void 0:c.onAction)!=null?l({type:"default",message:s,action:{label:c.actionText,onPress:function(){c.onAction()}}}):l({type:"default",message:s}),!0}function L(e,t){var n=e.id,i=e.initialAction,s=e.onDismiss,u=e.pendingAction,c=e.settleDuration,d=e.toastPosition;if(a===!1||c!=null&&c!==5e3||d!=null&&d!=="LEFT"||t!=null&&t!==o("WAWebToastManager").ToastPosition.LEFT)return!1;if(i){var m=i.action,p=i.handler,_=i.text;m!=null&&p!=null?l({type:"loading",message:function(){return _},action:function(){return{label:m,onPress:function(){return void p()}}},process:u}):l({type:"loading",message:function(){return _},process:u})}return u.then(function(e){e&&(e.action!=null&&e.handler!=null?l({type:"default",message:e.text,action:{label:e.action,onPress:function(){return void(e.handler==null?void 0:e.handler())}}}):l({type:"default",message:e.text}))}).catch(r("WAWebNoop")),!0}var E=function(n,r){var t,o=!1,a=n.props;if("pendingAction"in a?o=L(a,r):o=R(a,r),!o){var i=(t=a.id)!=null?t:C(),l=e.current.get(i);l?l.restartDelay==null||l.restartDelay():v(function(e){var t;return babelHelpers.extends({},e,(t={},t[i]={toast:n,position:r,id:i},t))})}},k=function(t){b[t]&&v(function(e){return r("lodash").omit(e,t)})};o("useWAWebListener").useListener(o("WAWebToastManager").ToastManager,"open_toast",E),o("useWAWebListener").useListener(o("WAWebToastManager").ToastManager,"close_toast",k),p(function(){c.current=Object.keys(S!=null?S:{}).length>Object.keys(b).length},[b,S]);var I=c.current,T=r("lodash").sortBy(b,["toast","id"]).reverse().map(function(e,t){var n=e.id,a=e.position,i=e.toast;return d.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(g.wrapper,a===o("WAWebToastManager").ToastPosition.CENTER&&g.center,a===o("WAWebToastManager").ToastPosition.RIGHT&&g.right,t===0&&I&&g.slide0,t===1&&g.slide1,t===2&&g.slide2,t>=h&&g.slide3),{children:d.jsx("div",babelHelpers.extends({},s.props(a===o("WAWebToastManager").ToastPosition.CENTER&&(r("WAWebL10N").isRTL()?g.transformRight:g.transformLeft)),{children:m(i,{ref:u.current.getRefSetter(n),id:n})}))}),n)});return d.jsxs(d.Fragment,{children:[n("cr:782")!=null&&d.jsx(n("cr:782"),{openToast:E}),d.jsx(r("WAWebVelocityTransitionGroup"),{transitionName:"fade_sifo",children:T})]})}y.displayName=y.name+" [from "+i.id+"]";function C(e){return r("uniqueID")(e||"toast")}l.default=y}),98);